plugins {
    id 'java'
}

repositories {
    mavenCentral()
}

java {
    sourceCompatibility = JavaVersion.VERSION_11
    targetCompatibility = JavaVersion.VERSION_11
}

dependencies {
    implementation 'org.apache.commons:commons-lang3:3.12.0'
    implementation 'org.apache.commons:commons-collections4:4.4'
    implementation 'org.apache.commons:commons-text:1.10.0'
    implementation 'commons-cli:commons-cli:1.5.0'

    // add additional db jars
    implementation 'com.oracle.database.jdbc:ojdbc8:21.8.0.0'
    implementation 'mysql:mysql-connector-java:8.0.31'
    implementation 'org.postgresql:postgresql:42.5.1'
}

tasks.register('fatJar', Jar) {
    manifest {
        attributes(
            'Implementation-Title': 'table2pojo',
            'Implementation-Version': '1.0',
            'Main-Class': 'com.kumarvv.table2pojo.Table2Pojo'
        )
    }
    archiveBaseName.set("${project.name}-all")
    duplicatesStrategy = DuplicatesStrategy.EXCLUDE
    from {
        configurations.runtimeClasspath.asFileTree.collect { it.isDirectory() ? it : zipTree(it) }
    }
    with(tasks.named('jar').get())
}